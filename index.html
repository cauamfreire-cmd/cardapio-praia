<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card√°pio Barraca Prime</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:url("https://images.unsplash.com/photo-1507525428034-b723cf961d3e");
  background-size:cover;
  background-attachment:fixed;
}

.overlay{
  background:rgba(0,0,0,0.6);
  min-height:100vh;
  padding-bottom:160px;
}

header{
  text-align:center;
  padding:25px;
  color:white;
}

header img{
  width:180px;
}

header h1{
  margin:10px 0 0 0;
  font-size:30px;
}

.tempo{
  margin-top:10px;
  background:#ff9800;
  padding:8px 15px;
  border-radius:20px;
  display:inline-block;
}

.categoria{
  color:white;
  font-size:22px;
  margin:20px;
  font-weight:bold;
}

.item{
  background:white;
  margin:15px;
  padding:18px;
  border-radius:15px;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.item h2{
  margin:0;
  font-size:20px;
}

.preco{
  font-weight:bold;
  margin-top:5px;
}

select, textarea{
  width:100%;
  margin-top:8px;
  padding:8px;
  border-radius:8px;
}

textarea{
  resize:none;
  height:60px;
}

.controle{
  margin-top:10px;
  display:flex;
  align-items:center;
  gap:10px;
}

.controle button{
  background:#009688;
  border:none;
  color:white;
  font-size:18px;
  padding:5px 12px;
  border-radius:8px;
  cursor:pointer;
}

.controle span{
  font-size:18px;
  width:30px;
  text-align:center;
}

.botao-flutuante{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#25d366;
  color:white;
  padding:18px 40px;
  border-radius:50px;
  font-size:18px;
  box-shadow:0 5px 20px rgba(0,0,0,0.4);
  cursor:pointer;
}
</style>
</head>

<body>

<div class="overlay">

<header>
<img src="logo.png">
<h1>Card√°pio Barraca Prime üåä</h1>
<div class="tempo">‚è± Tempo estimado: 40min ‚Äì 1 hora</div>
</header>

<div id="cardapio"></div>

</div>

<div class="botao-flutuante" onclick="enviarPedido()">
üõí Finalizar Pedido | R$ <span id="total">0.00</span>
</div>

<script>

const telefone="5584992217686";
const tempoEntrega="40min ‚Äì 1 hora";

const categorias=[
{
nome:"üêü Peixes",
itens:[
{nome:"Fil√© de Peixe Grelhado",preco:179.99},
{nome:"Moqueca de Peixe",preco:289.00},
{nome:"Isca de Peixe",preco:169.99,isca:true}
]
},
{
nome:"üçó Carnes e Frango",
itens:[
{nome:"Isca de Frango",preco:159.99,isca:true},
{nome:"Frango a Passarinho",preco:139.99},
{nome:"Carne de Sol",preco:159.99}
]
}
];

let carrinho={};
let escolhas={};
let observacoes={};

const cardapio=document.getElementById("cardapio");

categorias.forEach((categoria,cIndex)=>{

  const titulo=document.createElement("div");
  titulo.className="categoria";
  titulo.innerText=categoria.nome;
  cardapio.appendChild(titulo);

  categoria.itens.forEach((item,iIndex)=>{

    const id=cIndex+"-"+iIndex;
    carrinho[id]=0;
    escolhas[id]={tipo:"Individual"};
    observacoes[id]="";

    const div=document.createElement("div");
    div.className="item";

    div.innerHTML=`
      <h2>${item.nome}</h2>
      <div class="preco">R$ ${item.preco.toFixed(2)}</div>

      ${item.isca ? `
      <label>Tipo:</label>
      <select onchange="escolhas['${id}'].tipo=this.value">
        <option>Individual</option>
        <option>Refei√ß√£o</option>
      </select>
      ` : ``}

      <label>Observa√ß√£o:</label>
      <textarea placeholder="Ex: sem sal, bem passado..." 
      onchange="observacoes['${id}']=this.value"></textarea>

      <div class="controle">
        <button onclick="alterar('${id}',-1)">-</button>
        <span id="q${id}">0</span>
        <button onclick="alterar('${id}',1)">+</button>
      </div>
    `;

    cardapio.appendChild(div);

  });

});

function alterar(id,valor){
  carrinho[id]+=valor;
  if(carrinho[id]<0) carrinho[id]=0;
  document.getElementById("q"+id).innerText=carrinho[id];
  atualizarTotal();
}

function atualizarTotal(){
  let total=0;
  categorias.forEach((categoria,cIndex)=>{
    categoria.itens.forEach((item,iIndex)=>{
      const id=cIndex+"-"+iIndex;
      total+=item.preco*carrinho[id];
    });
  });
  document.getElementById("total").innerText=total.toFixed(2);
}

function enviarPedido(){

  let mensagem="üßæ Pedido - Barraca Prime\n\n";
  let total=0;

  categorias.forEach((categoria,cIndex)=>{
    categoria.itens.forEach((item,iIndex)=>{
      const id=cIndex+"-"+iIndex;

      if(carrinho[id]>0){
        mensagem+=`${carrinho[id]}x ${item.nome}`;

        if(item.isca){
          mensagem+=` (${escolhas[id].tipo})`;
        }

        if(observacoes[id]){
          mensagem+=` | Obs: ${observacoes[id]}`;
        }

        mensagem+=`\n`;
        total+=item.preco*carrinho[id];
      }
    });
  });

  if(total===0){
    alert("Selecione pelo menos um item");
    return;
  }

  mensagem+=`\n‚è± Tempo estimado: ${tempoEntrega}`;
  mensagem+=`\nüí∞ Total: R$ ${total.toFixed(2)}`;

  const link=`https://wa.me/${telefone}?text=${encodeURIComponent(mensagem)}`;
  window.open(link,"_blank");
}

</script>

</body>
</html>
